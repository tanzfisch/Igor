<?xml version="1.0"?>
<Igor>
	<!-- material definition -->
	<Material name="igor.skybox" uuid="7b6a4eec-4e7c-4497-9f3f-9b32572bff2b">
		<States>
			<DepthTest>Off</DepthTest>
            <DepthFunc>Less</DepthFunc>
            <DepthMask>On</DepthMask>
            <Blend>Off</Blend>
            <CullFace>On</CullFace>
            <CullFaceFunc>Back</CullFaceFunc>
		</States>
        <Program>
            <Vertex>
<![CDATA[#version 430

layout(location = 0) in vec3 in_position;
layout(location = 1) in vec4 in_color;
layout(location = 2) in vec2 in_texCoord;
layout(location = 3) in float in_texUnit;

uniform mat4 igor_modelViewProjection;

out vec4 VertexColor;
out vec2 TexCoord;
out float TexUnit;

void main()
{
	VertexColor = in_color;
	TexCoord = in_texCoord;
    TexUnit = in_texUnit;

	gl_Position = igor_modelViewProjection * vec4(in_position,1);
}]]>
            </Vertex>
            <Fragment>
<![CDATA[#version 430

in vec4 VertexColor;
in vec2 TexCoord;
in float TexUnit;

layout(location = 0) out vec4 out_color;

layout (binding = 0) uniform sampler2D u_textures[6];

void main()
{
	vec4 texColor = VertexColor;

	switch(int(TexUnit))
	{
		case  0: texColor *= texture2D(u_textures[0], TexCoord); break;
		case  1: texColor *= texture2D(u_textures[1], TexCoord); break;
		case  2: texColor *= texture2D(u_textures[2], TexCoord); break;
		case  3: texColor *= texture2D(u_textures[3], TexCoord); break;
		case  4: texColor *= texture2D(u_textures[4], TexCoord); break;
		case  5: texColor *= texture2D(u_textures[5], TexCoord); break;
	}

	out_color = texColor;
}]]>
            </Fragment>
        </Program>            
	</Material>
</Igor>
