<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Igor: Example06_Particles.md Source File</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr>
						<td id="projectlogo">                        
                            <div style="position: relative; height: 120px; width: 440px;">
                                <div style="position: absolute; float: right; right: 30px; bottom: 10px; z-index: 1000; background-color: transparent;">0.20.0</div>
                                <img alt="Logo" src="logo.png"></img>                            
                            </div>
                        </td>                            
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_example06___particles_8md.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example06_Particles.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_example06___particles_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Particle Systems Example                                       {#example06}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;========================</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;The particles example shows how to set up particle systems and their corresponding emitters ([youtube](https://www.youtube.com/watch?v=pXI5tWLcBKQ)).</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;Build</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;=====</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;The code for this example can be found in the folder examples/06 Particles. In a vs[ver] sub folder you will find a visual studio solution which contains example project but also all dependent projects. So you just open this one and than build and start. If everything went right you gonna see the following screen. If not please don&#39;t hesitate to contact [tanzfisch](https://github.com/tanzfisch).</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;![Particles Example](/images/Example06_Pic1.png)</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;Interaction</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;===========</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;* Press left mouse button and drag to rotate the camera position around center of interest.</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;* Press **Space** to pause and continue the particle systems</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;Code</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;====</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;Well Particles is something you really don&#39;t want to configure in code. There fore in future version we can configure it using the ModelViewer and load it like model data later in the the scene. Until that here just one from the numerous particle systems within the example code.</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;First we define the color gradient of the particles during their life time. Independent from their real lifetime this gradient goes from 0.0 to 1.0. 0.0 defines birth of a particle and 1.0 the dead. So in this case we fade in from white transparent to white opaque and than fade out to black transparent. We don&#39;t need any other colors here because the color is already inside the texture.</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    iGradientColor4f colors;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    colors.insertValue(0.0, iaColor4f(1.0, 1.0, 1.0, 0.0));</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    colors.insertValue(0.2, iaColor4f(1.0, 1.0, 1.0, 1.0));</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    colors.insertValue(0.4, iaColor4f(1.0, 1.0, 1.0, 1.0));</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    colors.insertValue(1.0, iaColor4f(0.0, 0.0, 0.0, 0.0));</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;Now we define the life time of particles. Since this gradient has only one entry it means all particles emitted at any time will have a life time between 0.2 and 0.5 seconds.</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    iGradientVector2f visibility;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    visibility.insertValue(0.0, iaVector2f(0.2, 0.5));</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;Next gradient defines that at any time the emission rate will be 4 particles per frame (this might change to something like particles per second in later versions).</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    iGradientui emission;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    emission.insertValue(0.0, 4);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;Now we define the starting velocity of the particles that varies between 0.4 and 0.7.</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    iGradientVector2f velocity;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    velocity.insertValue(0.0, iaVector2f(0.4, 0.7));</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;And finally the size of the particles between 3.0 and 4.0.</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    iGradientVector2f startSize;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    startSize.insertValue(0.0, iaVector2f(3.0, 4.0));</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;So the data is set now we create the particle system it self and set a couple of parameters and put in the gradients we just defined.</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    iNodeParticleSystem* particleSystem = static_cast&lt;iNodeParticleSystem*&gt;(iNodeFactory::getInstance().createNode(iNodeType::iNodeParticleSystem));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    _particleSystemIDs.push_back(particleSystem-&gt;getID());</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    particleSystem-&gt;setMaterial(_particlesMaterial);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    particleSystem-&gt;setTextureA(&quot;particleFire.png&quot;);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    particleSystem-&gt;setFirstTextureTiling(4, 4);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    particleSystem-&gt;setColorGradient(colors);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    particleSystem-&gt;setEmissionGradient(emission);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    particleSystem-&gt;setStartVisibleTimeGradient(visibility);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    particleSystem-&gt;setStartSizeGradient(startSize);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    particleSystem-&gt;setStartVelocityGradient(velocity);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    particleSystem-&gt;setPeriodTime(2.0);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    particleSystem-&gt;setVortexTorque(0.2, 0.5);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    particleSystem-&gt;setVorticityConfinement(0.05);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    particleSystem-&gt;setVortexRange(10.0, 15.0);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    particleSystem-&gt;setVortexApperanceIntervall(5);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;Put it in the scene root and start it (it does not have to be under the root node).</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    _scene-&gt;getRoot()-&gt;insertNode(particleSystem);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    particleSystem-&gt;start();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;We also need an emitter otherwise nothing will happen and tell the particle system to use it. It is allowed for multiple particle systems to use the same emitter. In this case we define the emitter as a disc of size 3 which by default points up.</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    iNodeEmitter* emitter = static_cast&lt;iNodeEmitter*&gt;(iNodeFactory::getInstance().createNode(iNodeType::iNodeEmitter));</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    particleSystem-&gt;setEmitter(emitter-&gt;getID());</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    emitter-&gt;setType(iEmitterType::Disc);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    emitter-&gt;setSize(3);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;Using a transform to position the emitter where it suits us. and put all together in to the scene.</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    iNodeTransform* transform = static_cast&lt;iNodeTransform*&gt;(iNodeFactory::getInstance().createNode(iNodeType::iNodeTransform));</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    transform-&gt;translate(-2, -4, 40);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    transform-&gt;insertNode(emitter);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    _scene-&gt;getRoot()-&gt;insertNode(transform);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;And that&#39;s it. For further questions please contact [tanzfisch](https://github.com/tanzfisch).</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="navelem"><a class="el" href="_example06___particles_8md.html">Example06_Particles.md</a></li>
				<li class="footer">
					Generated on Sat May 25 2019 16:07:59 for Igor by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8.
					Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>