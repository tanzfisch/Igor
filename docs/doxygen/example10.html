<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Igor: L-System Example</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr>
						<td id="projectlogo">                        
                            <div style="position: relative; height: 120px; width: 440px;">
                                <div style="position: absolute; float: right; right: 30px; bottom: 10px; z-index: 1000; background-color: transparent;">0.20.0</div>
                                <img alt="Logo" src="logo.png"></img>                            
                            </div>
                        </td>                            
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('example10.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">L-System Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The L-System example shows how to set up L-Systems and generate meshs from them by using a skeleton and the iModelDataIO interface (<a href="https://www.youtube.com/watch?v=5qK0ee4xTug">youtube</a>).</p>
<h1>Build </h1>
<p>The code for this example can be found in the folder examples/10 L-Systems. In a vs[ver] sub folder you will find a visual studio solution which contains example project but also all dependent projects. So you just open this one and than build and start. If everything went right you gonna see the following screen. If not please don't hesitate to contact <a href="https://github.com/tanzfisch">tanzfisch</a>.</p>
<div class="image">
<img src="Example10_Pic1.png" alt="Example10_Pic1.png"/>
<div class="caption">
L-System Example</div></div>
<p> There is also a youtube clip <a href="https://youtu.be/5qK0ee4xTug">L-System Example</a>.</p>
<h1>Interaction </h1>
<ul>
<li>Press <b>Left Mouse Button</b> and drag to rotate the camera position around center of interest.</li>
<li>Use <b>Mouse Wheel</b> to zoom in and out</li>
<li>Press <b>Space</b> to regenerate plants</li>
</ul>
<h1>Code </h1>
<p>All the meat about how to use the iLSystem class is in the methods initStyle1, initStyle2 and initStyle3. We will only have a closer look at one of them because they are mostly the same except for the values ins use.</p>
<p>The first line is a typical replacement rule F will be replaced with FF. This basically makes all branches grow double each iteration. </p><pre class="fragment">_lSystem.setRule('F', "FF");
</pre><p>In the next section we have an example for a weighted rule with 4 cases. Make sure all four probabilities add up to 1.0. </p><pre class="fragment">vector&lt;pair&lt;float64, iaString&gt;&gt; weightedRule1;
weightedRule1.push_back(pair&lt;float64, iaString&gt;(0.25, "F[+X]OF[-X]+X."));
weightedRule1.push_back(pair&lt;float64, iaString&gt;(0.25, "FO[-X]F[+X]-X."));
weightedRule1.push_back(pair&lt;float64, iaString&gt;(0.25, "F[RX]F[LX]ORX."));
weightedRule1.push_back(pair&lt;float64, iaString&gt;(0.25, "F[LX]FO[RX]LX."));
_lSystem.setRule('X', weightedRule1);
</pre><p>In the following section we also have a weighted rule but it also has an additional age filter. It basically says that it has only effect after the L-System age is greater 2. In our scenario the buds that are represented with a '*' can earliest appear on the 4th plant because it has the age of 4. </p><pre class="fragment">vector&lt;pair&lt;float64, iaString&gt;&gt; weightedRule2;
weightedRule2.push_back(pair&lt;float64, iaString&gt;(0.3, "."));
weightedRule2.push_back(pair&lt;float64, iaString&gt;(0.7, "*"));
_lSystem.setRule('.', weightedRule2);
_lSystem.setAgeFilter('.', iLSystemAgeFunction::Greater, 2);
</pre><p>The next one works exactly the same but instead of turning the '.' placeholder in to buds it turns buds in to flowers. </p><pre class="fragment">vector&lt;pair&lt;float64, iaString&gt;&gt; weightedRule3;
weightedRule3.push_back(pair&lt;float64, iaString&gt;(0.3, "*"));
weightedRule3.push_back(pair&lt;float64, iaString&gt;(0.7, "o"));
_lSystem.setRule('*', weightedRule3);
_lSystem.setAgeFilter('*', iLSystemAgeFunction::Greater, 4);
</pre><p>The following definitions have nothing to do with the L-System it self. They are only important for the later generation of meshs and representation of the L-Systems. </p><pre class="fragment">_segmentLength = 0.25;
_angle = 0.3;
_trunkColor.set(0, 0.8, 0);
_budColor.set(0.8, 0.7, 0.0);
_flowerColor.set(1, 0, 0);
_leafColor.set(0, 0.7, 0);
</pre><p>Inside the PlantMeshGenerator class we do basically three things.</p><ol type="1">
<li>we run the L-System generation to create a new sentence that describes our plant</li>
<li>we generate a skeleton based on the L-System</li>
<li>we generate some mehs basxed on the skeleton</li>
</ol>
<p>For generating the L-System sentence we just call the following function. The first parameter is the starting sentence that should contain something the L-System is able to replace. In our case just "X". The second parameter stands for how many iterations the L-System should run. Iterations in our case equals age. And last but not lease we git the l-System a random seed so we can actually generate different ages of the exact same plant and make it grow. </p><pre class="fragment">iaString sentence = lSystem-&gt;generate(plantInformation-&gt;_axiom, plantInformation-&gt;_iterations, _rand.getNext());
</pre><p>Next we generate a skeleton based on the generated sentence. We basically iterate through the sentence and based on the symbols we find we create bones make transformations or attach custom values to the bones. All that can be found in PlantMeshGenerator::generateSkeleton but will not discussed in this tutorial in detail. And last we traverse through the skeleton tree and generate the mesh by adding stems, buds or flowers.</p>
<p>All this can be done of course more efficient and better looking but the tutorial was meant to show primarily the iLSystem class. Feel free to change it as you wish and if you have further questions please contact <a href="https://github.com/tanzfisch">tanzfisch</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="navelem"><a class="el" href="tutorials.html">Tutorials</a></li>
				<li class="footer">
					Generated on Tue May 28 2019 17:02:16 for Igor by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8.
					Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>