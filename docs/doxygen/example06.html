<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.15"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Igor: Particle Systems Example</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr>
						<td id="projectlogo">                        
                            <div style="position: relative; height: 120px; width: 440px;">
                                <div style="position: absolute; float: right; right: 30px; bottom: 10px; z-index: 1000; background-color: transparent;">0.18.0</div>
                                <img alt="Logo" src="logo.png"></img>                            
                            </div>
                        </td>                            
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part --><!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('example06.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Particle Systems Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The particles example shows how to set up particle systems and their corresponding emitters (<a href="https://www.youtube.com/watch?v=pXI5tWLcBKQ">youtube</a>).</p>
<h1>Build </h1>
<p>The code for this example can be found in the folder examples/06 Particles. In a vs[ver] sub folder you will find a visual studio solution which contains example project but also all dependent projects. So you just open this one and than build and start. If everything went right you gonna see the following screen. If not please don't hesitate to contact <a href="https://github.com/tanzfisch">tanzfisch</a>.</p>
<div class="image">
<img src="Example06_Pic1.png" alt="Example06_Pic1.png"/>
<div class="caption">
Particles Example</div></div>
<h1>Interaction </h1>
<ul>
<li>Press left mouse button and drag to rotate the camera position around center of interest.</li>
<li>Press <b>Space</b> to pause and continue the particle systems</li>
</ul>
<h1>Code </h1>
<p>Well Particles is something you really don't want to configure in code. There fore in future version we can configure it using the <a class="el" href="class_model_viewer.html">ModelViewer</a> and load it like model data later in the the scene. Until that here just one from the numerous particle systems within the example code.</p>
<p>First we define the color gradient of the particles during their life time. Independent from their real lifetime this gradient goes from 0.0 to 1.0. 0.0 defines birth of a particle and 1.0 the dead. So in this case we fade in from white transparent to white opaque and than fade out to black transparent. We don't need any other colors here because the color is already inside the texture. </p><pre class="fragment">iGradientColor4f colors;
colors.insertValue(0.0, iaColor4f(1.0, 1.0, 1.0, 0.0));
colors.insertValue(0.2, iaColor4f(1.0, 1.0, 1.0, 1.0));
colors.insertValue(0.4, iaColor4f(1.0, 1.0, 1.0, 1.0));
colors.insertValue(1.0, iaColor4f(0.0, 0.0, 0.0, 0.0));
</pre><p>Now we define the life time of particles. Since this gradient has only one entry it means all particles emitted at any time will have a life time between 0.2 and 0.5 seconds. </p><pre class="fragment">iGradientVector2f visibility;
visibility.insertValue(0.0, iaVector2f(0.2, 0.5));
</pre><p>Next gradient defines that at any time the emission rate will be 4 particles per frame (this might change to something like particles per second in later versions). </p><pre class="fragment">iGradientui emission;
emission.insertValue(0.0, 4);
</pre><p>Now we define the starting velocity of the particles that varies between 0.4 and 0.7. </p><pre class="fragment">iGradientVector2f velocity;
velocity.insertValue(0.0, iaVector2f(0.4, 0.7));
</pre><p>And finally the size of the particles between 3.0 and 4.0. </p><pre class="fragment">iGradientVector2f startSize;
startSize.insertValue(0.0, iaVector2f(3.0, 4.0));
</pre><p>So the data is set now we create the particle system it self and set a couple of parameters and put in the gradients we just defined. </p><pre class="fragment">iNodeParticleSystem* particleSystem = static_cast&lt;iNodeParticleSystem*&gt;(iNodeFactory::getInstance().createNode(iNodeType::iNodeParticleSystem));
_particleSystemIDs.push_back(particleSystem-&gt;getID());
particleSystem-&gt;setMaterial(_particlesMaterial);
particleSystem-&gt;setTextureA("particleFire.png");
particleSystem-&gt;setFirstTextureTiling(4, 4);
particleSystem-&gt;setColorGradient(colors);
particleSystem-&gt;setEmissionGradient(emission);
particleSystem-&gt;setStartVisibleTimeGradient(visibility);
particleSystem-&gt;setStartSizeGradient(startSize);
particleSystem-&gt;setStartVelocityGradient(velocity);
particleSystem-&gt;setPeriodTime(2.0);
particleSystem-&gt;setVortexTorque(0.2, 0.5);
particleSystem-&gt;setVorticityConfinement(0.05);
particleSystem-&gt;setVortexRange(10.0, 15.0);
particleSystem-&gt;setVortexApperanceIntervall(5);
</pre><p>Put it in the scene root and start it (it does not have to be under the root node). </p><pre class="fragment">_scene-&gt;getRoot()-&gt;insertNode(particleSystem);
particleSystem-&gt;start();
</pre><p>We also need an emitter otherwise nothing will happen and tell the particle system to use it. It is allowed for multiple particle systems to use the same emitter. In this case we define the emitter as a disc of size 3 which by default points up. </p><pre class="fragment">iNodeEmitter* emitter = static_cast&lt;iNodeEmitter*&gt;(iNodeFactory::getInstance().createNode(iNodeType::iNodeEmitter));
particleSystem-&gt;setEmitter(emitter-&gt;getID());
emitter-&gt;setType(iEmitterType::Disc);
emitter-&gt;setSize(3);
</pre><p>Using a transform to position the emitter where it suits us. and put all together in to the scene. </p><pre class="fragment">iNodeTransform* transform = static_cast&lt;iNodeTransform*&gt;(iNodeFactory::getInstance().createNode(iNodeType::iNodeTransform));
transform-&gt;translate(-2, -4, 40);
transform-&gt;insertNode(emitter);
_scene-&gt;getRoot()-&gt;insertNode(transform);
</pre><p>And that's it. For further questions please contact <a href="https://github.com/tanzfisch">tanzfisch</a>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="navelem"><a class="el" href="tutorials.html">Tutorials</a></li>
				<li class="footer">
					Generated on Thu May 9 2019 17:28:27 for Igor by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15.
					Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>